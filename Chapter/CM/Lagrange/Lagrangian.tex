\documentclass[../../../main.tex]{subfiles}
\begin{document}
The Lagrangian is defined as
\begin{equation*}
	\mathcal{L}=T-U
\end{equation*}
which mean that the Lagrangian is a function of position and velocity.
The path of particle is determined by Hamilton's principle
\begin{equation*}
	S=\int_{t_1}^{t_2}\mathcal{L}\;dt
\end{equation*}
that is, the particle's path is such that the action integral $S$ is stationary.

We can express the coordinate in other generalized coordinate
\begin{equation*}
	\mathbf{r}=\mathbf{r}(q_1,q_2,q_2)
\end{equation*}
And the same for velocity
\begin{equation*}
	\mathbf{v}=\mathbf{v}(\dot{q}_1,\dot{q}_2,\dot{q}_3)
\end{equation*}
Now the action integral reads
\begin{equation*}
	S=\int_{t_1}^{t_2}\mathcal{L}(q_1,q_2,q_3,\dot{q}_1,\dot{q}_2,\dot{q}_3,t)\;dt
\end{equation*}
Therefore we have three Euler-Lagrange equation that must be satisfied by the particle
\begin{align*}
	\frac{\partial \mathcal{L}}{\partial q_1}=\frac{d}{dt}\frac{\partial \mathcal{L}}{\partial \dot{q}_1}, \quad
	\frac{\partial \mathcal{L}}{\partial q_2}=\frac{d}{dt}\frac{\partial \mathcal{L}}{\partial \dot{q}_2}, \quad
	\frac{\partial \mathcal{L}}{\partial q_3}=\frac{d}{dt}\frac{\partial \mathcal{L}}{\partial \dot{q}_3}
\end{align*}
This is the case of one unconstrained particle. For $N$ unconstrained particle, then, we shall have $3N$ Lagrange equation
\begin{equation*}
	\frac{\partial\mathcal{L}}{\partial q_i}=\frac{d}{dt}\frac{\partial \mathcal{L}}{\partial \dot{q}_i}\qquad i=1,\dots,3N
\end{equation*}

The Lagrangian equation
\begin{equation*}
	\frac{\partial \mathcal{L}}{\partial q_i}=\frac{d}{dt}\frac{\partial \mathcal{L}}{\partial \dot{q}_i}
\end{equation*}
takes the form
\begin{equation*}
	\text{Generalized force}=\text{Rate of change of Generalized momentum}
\end{equation*}
where
\begin{equation*}
	\frac{\partial \mathcal{L}}{\partial q_i}=i\text{-th component of the Generalized force}
\end{equation*}
and
\begin{equation*}
	\frac{\partial \mathcal{L}}{\partial \dot{q}_i}=i\text{-th component of the Generalized momentum}
\end{equation*}

Set of generalized coordinates that minimize the number of Euler-Lagrangian equation and be able to uniquely describe said system is said to be natural.
This implies that natural coordinate also have minimum degree of freedom, that is the number of coordinate that can be varied independently.
System with $n$ degree of freedom that can be described by $n$ generalized coordinate is called holonomic.
In general
\begin{equation*}
	\text{DoF}=\text{No. of Coordinate}-\text{No. Constraint}
\end{equation*}
For example, double pendulum have 4 coordinates and two constraint, thus having two degree of freedom.

The steps to solve problem using Lagrangian formalism are as follows.
\begin{enumerate}
	\item Write down the Lagrangian $\mathcal{L}=T-U$.
	\item Choose generalized $n$ coordinate $q_n$ and $\dot{q}_n$.
	\item Rewrite $\mathcal{L}$ in terms of $q_n$ and $\dot{q}_n$.
	\item Write $n$ Lagrange equation.
\end{enumerate}

\subsection*{Proof of Lagrange Equation with Constraint}
Suppose a particle has two degree of freedom with two kinds of forces act on it:
constraint force $\mathbf{F}_\text{cstr}$, say interatomic forces that bind rigid body atom together;
and the is non constraint conservative forces $\mathbf{F}$, which at minimum must be able to be derived from potential energy $F=-\nabla U(\mathbf{r},t)$, say gravitational force.
The total energy is then
\begin{equation*}
	\mathbf{F}_\text{tot}=\mathbf{F}_\text{cstr}+\mathbf{F}
\end{equation*}
and the Lagrangian
\begin{equation*}
	\mathcal{L}=T-U
\end{equation*}
where $U$ is the potential energy which can be derived into non constraint conservative force.

The path of the particle can be denoted as
\begin{equation*}
	\mathbf{R}(t)=\mathbf{r}(t)+\boldsymbol{\epsilon}(t)
\end{equation*}
with $\mathbf{r}(t)$ as the correct path and $\boldsymbol{\epsilon}(t)$ as infinitesimal vector pointing away from the correct path.
Then we have two Lagrangians
\begin{equation*}
	\mathcal{L}=\mathcal{L}(\mathbf{R},\dot{\mathbf{R}},t),\qquad
	\mathcal{L}_0=\mathcal{L}_0(\mathbf{r},\dot{\mathbf{r},t})
\end{equation*}
and two action integral
\begin{equation*}
	S=\int_{t_1}^{t_2}\mathcal{L}\;dt,\qquad S_0=\int_{t_1}^{t_2}\mathcal{L}_0\;dt
\end{equation*}
It can be proven that the difference in action integral $\delta S=S-S_0$ is zero, to the first order.

We write the difference in Lagrangian as
\begin{align*}
	\delta \mathcal{L} & =\frac{1}{2}m\dot{\mathbf{R}}^2-U(\mathbf{R},t)-\frac{1}{2}m\dot{\mathbf{r}}^2+U(\mathbf{r},t)                                                                     \\
	                   & =\frac{1}{2}m\left[(\dot{\mathbf{r}}^2+\dot{\boldsymbol{\epsilon}}^2)-\dot{\mathbf{r}}^2\right]-\left[U(\mathbf{r}+\boldsymbol{\epsilon},t)-U(\mathbf{r},t)\right] \\
	                   & =\frac{1}{2}m\left[\dot{\mathbf{r}}^2+\dot{\boldsymbol{\epsilon}}^2+2\dot{\mathbf{r}}\cdot\dot{\boldsymbol{\epsilon}}^2-\dot{\mathbf{r}}^2\right]-dU               \\
	\delta\mathcal{L}  & =\frac{1}{2}m\dot{\boldsymbol{\epsilon}}^2+m\dot{\mathbf{r}}\cdot\dot{\boldsymbol{\epsilon}}-{\boldsymbol{\epsilon}}\cdot \nabla U
\end{align*}
The difference in action integral, in the first order, is then
\begin{equation*}
	S=\int_{t_1}^{t_2}\mathcal{L}_0\;dt=\int_{t_1}^{t_2}\left(m\dot{\mathbf{r}}\cdot\dot{\boldsymbol{\epsilon}}-\boldsymbol{\epsilon}\cdot\nabla U\right)\;dt
\end{equation*}
Using integration by parts
\begin{equation*}
	\int_{a}^{b} f\bigg(\frac{dg}{dx}\bigg)\;dx=-\int_{a}^{b} g\bigg(\frac{df}{dx}\bigg)\;dx+ fg \bigg\lvert_{a}^{b}
\end{equation*}
on the first term
\begin{equation*}
	\delta S=-\int_{t_1}^{t_2}\boldsymbol{\epsilon}\cdot\left[m\ddot{\mathbf{r}}+\nabla U\right]\;dt+m\dot{\mathbf{r}}\boldsymbol{\epsilon}\bigg|_{t_1}^{t^2}
\end{equation*}
The difference of $\boldsymbol{\epsilon}$ is zero between two end point, so 
\begin{equation*}
	\delta S=-\int_{t_1}^{t_2}\boldsymbol{\epsilon}\cdot\left[m\ddot{\mathbf{r}}+\nabla U\right]\;dt
\end{equation*}
The path $\mathbf{r}(t)$ satisÔ¨Åes Newton second law, thus $m\ddot{\mathbf{r}}=\mathbf{F}_\text{tot}$. 
Meanwhile, the gradient of potential energy is the negative of non constraint force
\begin{equation*}
	\delta S=-\int_{t_1}^{t_2}\boldsymbol{\epsilon}\cdot\left[\mathbf{F}_\text{tot}-\mathbf{F}\right]\;dt=i\int_{t_1 }^{t_2}\boldsymbol{\epsilon}\cdot \mathbf{F}_\text{cstr}\;dt
\end{equation*}
Note that the constraint force is normal to the particle path and the $\boldsymbol{\epsilon}$, which lies to the same surface of particle path. 
Therefore, their dot product is zero 
\begin{equation*}
  \delta S=0
\end{equation*}
and the action integral is stationary.

This justifies the Lagrange equation for system with two degree of freedom where its constraint lie in the same surface as the particle path. 
In other words, it only applies to particle, or particles in that case, constrained to move in two dimension.
Accordingly, the action integral in this case is written as 
\begin{equation*}
  S=\int_{t_1}^{t_2}\mathcal{L}(q_1,q_2,\dot{q}_1,\dot{q}_2,t)\;dt
\end{equation*}  
which will result in two Euler-Lagrange equation
\begin{equation*}
  \frac{\partial \mathcal{L}}{\partial q_1}=\frac{d}{dt}\frac{\partial \mathcal{L}}{\partial \dot{q}_1},\qquad\frac{\partial \mathcal{L}}{\partial q_2}=\frac{d}{dt}\frac{\partial \mathcal{L}}{\partial \dot{q}_2}
\end{equation*}
\subsection*{Newton Law in 2D Cartesian}
The Lagrangian in this case is
\begin{equation*}
	\mathcal{L}(x,y,\dot{x},\dot{y})=\frac{1}{2}m(\dot{x}^2+\dot{y}^2)-U(x,y)
\end{equation*}
Here we have two Euler-Lagrange equation
\begin{equation*}
	\frac{\partial \mathcal{L}}{\partial x}=\frac{d}{dt}\frac{\partial \mathcal{L}}{\partial \dot{x}},\qquad
	\frac{\partial \mathcal{L}}{\partial y}=\frac{d}{dt}\frac{\partial \mathcal{L}}{\partial \dot{y}}
\end{equation*}
The derivative with respect to position is force
\begin{align*}
	\frac{\partial \mathcal{L}}{\partial x}=-\frac{\partial U}{\partial x}=F_x,\qquad
	\frac{\partial \mathcal{L}}{\partial y}=-\frac{\partial U}{\partial y}=F_y
\end{align*}
while the derivative with respect to velocity is momentum
\begin{align*}
	\frac{\partial\mathcal{L}}{\partial \dot{x}}=\frac{\partial T}{\partial \dot{x}}=m\dot{x}, \qquad
	\frac{\partial\mathcal{L}}{\partial \dot{y}}=\frac{\partial T}{\partial \dot{y}}=m\dot{y}
\end{align*}
Substituting this result in the two Euler-Lagrange equation, we have
\begin{equation*}
	F_x=m\ddot{x},\qquad F_y=m\ddot{y}
\end{equation*}
which are the two component of Newton second law $\mathbf{F}=m\mathbf{\ddot{r}}$.

\subsection*{Newton Law in Polar Coordinate}
The Lagrangian is
\begin{equation*}
	\mathcal{L}(r,\phi,\dot{r},\dot{\phi})=\frac{1}{2}m(\dot{r}^2+r^2\dot{\phi}^2)-U(r,\phi)
\end{equation*}
which result into two Euler-Lagrange equation
\begin{equation*}
	\frac{\partial\mathcal{L}}{\partial r}=\frac{d}{dt}\frac{\partial\mathcal{L}}{\partial \dot{r}}\qquad\frac{\partial\mathcal{L}}{\partial \phi}=\frac{d}{dt}\frac{\partial\mathcal{L}}{\partial \dot{\phi}}
\end{equation*}
Before moving into evaluating the derivative with respect to $r$ and $\phi$, recall the gradient of potential energy in polar coordinate
\begin{equation*}
	\nabla U=\frac{\partial U}{\partial r}\mathbf{\hat{{r}}}+ \frac{1}{r}\frac{\partial U}{\partial \phi}\boldsymbol{\hat{\phi}}-F_r\mathbf{\hat{r}}-F_{\phi}\boldsymbol{\hat{\phi}}
\end{equation*}

Evaluating the radial derivative
\begin{align*}
	mr\dot{\phi}-\frac{\partial U}{\partial r} & =m\ddot{r}               \\
	F_r                                        & =m(\ddot{r}+r\dot{\phi})
\end{align*}
which is simply the radial component of the Newton's second law in polar coordinate.
Evaluating the angular derivative
\begin{align*}
	-\frac{\partial U}{\partial \phi}            & =\frac{d}{dt}mr^2\dot{\phi}=m(2r\dot{r}\dot{\phi}+r^2\ddot{\phi}) \\
	-\frac{1}{r}\frac{\partial U}{\partial \phi} & =m(2\dot{r}\dot{\phi}+r^2\ddot{\phi})                             \\
	F_\phi                                       & =m(2\dot{r}\dot{\phi}+r\ddot{\phi})
\end{align*}
which is, as previously mentioned, the angular component of Newton's second law. It should be noted that the quantity $mr^2\dot{\phi}$ can be recognized as angular momentum $L$, and the rate of change of it is torque $\Gamma$
\begin{equation*}
	\Gamma=F_\phi r=\frac{dL}{dt}=\frac{d}{dt}mr^2\dot{\phi}
\end{equation*}
\end{document}